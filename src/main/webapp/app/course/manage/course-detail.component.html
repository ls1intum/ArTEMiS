<div class="row justify-content-center">
    <div class="col-12">
        <div *ngIf="courseDTO">
            <div class="course-info-bar" [class.course-info-bar--ide]="isOrion">
                <div class="row">
                    <div class="col general-info">
                        <h3>{{ courseDTO.course.title }}</h3>
                        <h4 class="d-none d-sm-inline">{{ courseDTO.course.description || ('artemisApp.courseOverview.noDescription' | artemisTranslate) }}</h4>
                        <h4 class="d-sm-none">{{ 'artemisApp.courseOverview.noDescription' | artemisTranslate }}</h4>
                        <h6 class="d-sm-none">{{ 'artemisApp.courseOverview.showMore' | artemisTranslate }}</h6>
                        <h6 class="d-sm-none">{{ 'artemisApp.courseOverview.showLess' | artemisTranslate }}</h6>
                    </div>
                    <div class="col-4 d-none d-md-flex justify-content-end course-icon">
                        <jhi-secured-image
                            *ngIf="courseDTO.course.courseIcon"
                            [src]="courseDTO.course.courseIcon"
                            [cachingStrategy]="CachingStrategy.LOCAL_STORAGE"
                            [alt]="'artemisApp.courseOverview.noCourseIcon' | artemisTranslate"
                        >
                        </jhi-secured-image>
                    </div>
                </div>
            </div>
            <jhi-alert></jhi-alert>
            <div class="tab-bar tab-bar-course-overview">
                <a [routerLink]="['/course-management', courseDTO.course.id, 'exams']" class="tab-item exams">
                    <b jhiTranslate="artemisApp.courseOverview.menu.exams">Exams</b>
                </a>
                <a [routerLink]="['/course-management', courseDTO.course.id, 'exercises']" class="tab-item exercises">
                    <b jhiTranslate="artemisApp.courseOverview.menu.exercises">Exercise</b>
                </a>
                <a [routerLink]="['/course-management', courseDTO.course.id, 'lectures']" class="tab-item lectures">
                    <b jhiTranslate="artemisApp.courseOverview.menu.lectures">Lectures</b>
                </a>
                <a *ngIf="courseDTO.isAtLeastInstructor" [routerLink]="['/course-management', courseDTO.course.id, 'course-statistics']" class="tab-item statistics">
                    <b jhiTranslate="artemisApp.courseOverview.menu.statistics">Statistics</b>
                </a>
                <a *ngIf="courseDTO.isAtLeastInstructor" [routerLink]="['/course-management', courseDTO.course.id, 'goal-management']" class="tab-item learningGoals">
                    <b jhiTranslate="artemisApp.learningGoal.learningGoalButton">Learning Goals</b>
                </a>
                <a *ngIf="courseDTO.isAtLeastInstructor" [routerLink]="['/course-management', courseDTO.course.id, 'scores']" class="tab-item scores">
                    <b jhiTranslate="entity.action.scores">Scores</b>
                </a>
                <a [routerLink]="['/course-management', courseDTO.course.id, 'tutor-dashboard']" class="tab-item assessmentDashboard">
                    <b jhiTranslate="entity.action.assessmentDashboard">Assessment Dashboard</b>
                </a>
                <a *ngIf="courseDTO.isAtLeastInstructor" [routerLink]="['/course-management', courseDTO.course.id, 'instructor-dashboard']" class="tab-item instructorDashboard">
                    <b jhiTranslate="artemisApp.course.instructorDashboard">Instructor Dashboard</b>
                </a>
                <a *ngIf="courseDTO.isAtLeastInstructor" [routerLink]="['/course-management', courseDTO.course.id, 'participant-scores']" class="tab-item participantScore">
                    <b jhiTranslate="artemisApp.participantScores.pageTitle">Learning Goals</b>
                </a>
                <div class="ml-auto">
                    <a
                        *ngIf="courseDTO.course.studentQuestionsEnabled && courseDTO?.isAtLeastTutor"
                        [routerLink]="['/course-management', courseDTO?.course.id, 'questions']"
                        class="btn btn-primary btn-md ml-1"
                    >
                        <fa-icon [icon]="'comment'"></fa-icon>
                        <span jhiTranslate="entity.action.questionsAndAnswers">Q&A</span>
                    </a>
                    <a *ngIf="courseDTO.isAtLeastInstructor" [routerLink]="['/course-management', courseDTO.course.id, 'edit']" class="btn btn-warning btn-md ml-1">
                        <fa-icon [icon]="'wrench'"></fa-icon>&nbsp;<span jhiTranslate="entity.action.edit">Edit</span>
                    </a>
                    <button
                        class="btn btn-md ml-1 mr-1"
                        *jhiHasAnyAuthority="['ROLE_ADMIN']"
                        [buttonSize]="ButtonSize.MEDIUM"
                        jhiDeleteButton
                        [entityTitle]="courseDTO.course.title || ''"
                        deleteQuestion="artemisApp.course.delete.question"
                        deleteConfirmationText="artemisApp.course.delete.typeNameToConfirm"
                        (delete)="deleteCourse(courseDTO.course.id!)"
                        [dialogError]="dialogError$"
                    >
                        <fa-icon [icon]="'times'"></fa-icon>
                    </button>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="row my-3">
                        <jhi-course-detail-doughnut-chart
                            class="col-md-6"
                            [doughnutChartTitle]="firstTitle"
                            [currentPercentage]="courseDTO.currentPercentageAssessments"
                            [currentAbsolute]="courseDTO.currentAbsoluteAssessments"
                            [currentMax]="courseDTO.currentMaxAssessments"
                        ></jhi-course-detail-doughnut-chart>
                        <jhi-course-detail-doughnut-chart
                            class="col-md-6"
                            [doughnutChartTitle]="secondTitle"
                            [currentPercentage]="courseDTO.currentPercentageComplaints"
                            [currentAbsolute]="courseDTO.currentAbsoluteComplaints"
                            [currentMax]="courseDTO.currentMaxComplaints"
                        ></jhi-course-detail-doughnut-chart>
                    </div>
                    <div class="row my-3">
                        <jhi-course-detail-doughnut-chart
                            class="col-md-6"
                            [doughnutChartTitle]="thirdTitle"
                            [currentPercentage]="courseDTO.currentPercentageMoreFeedbacks"
                            [currentAbsolute]="courseDTO.currentAbsoluteMoreFeedbacks"
                            [currentMax]="courseDTO.currentMaxMoreFeedbacks"
                        ></jhi-course-detail-doughnut-chart>
                        <jhi-course-detail-doughnut-chart
                            class="col-md-6"
                            [doughnutChartTitle]="fourthTitle"
                            [currentPercentage]="courseDTO.currentPercentageAverageScore"
                            [currentAbsolute]="courseDTO.currentAbsoluteAverageScore"
                            [currentMax]="courseDTO.currentMaxAverageScore"
                        ></jhi-course-detail-doughnut-chart>
                    </div>
                </div>
                <jhi-course-detail-bar-chart
                    class="col-md-8"
                    [courseId]="courseDTO.course.id!"
                    [numberOfStudentsInCourse]="courseDTO.numberOfStudentsInCourse"
                    [initialStats]="courseDTO.activeStudents"
                ></jhi-course-detail-bar-chart>
            </div>
            <button (click)="registerForCourse()" *ngIf="courseDTO.course.registrationEnabled" class="btn btn-warning mr-1 mb-1" type="button">
                <fa-icon [icon]="'user-plus'"></fa-icon>&nbsp;<span jhiTranslate="entity.action.registerForCourse">Register</span>
            </button>
            <button
                class="mb-1"
                *jhiHasAnyAuthority="['ROLE_ADMIN']"
                [buttonSize]="ButtonSize.MEDIUM"
                jhiDeleteButton
                [entityTitle]="courseDTO.course.title || ''"
                deleteQuestion="artemisApp.course.delete.question"
                deleteConfirmationText="artemisApp.course.delete.typeNameToConfirm"
                (delete)="deleteCourse(courseDTO.course.id!)"
                [dialogError]="dialogError$"
            >
                <fa-icon [icon]="'times'"></fa-icon>
            </button>
        </div>
        <hr />
        <div>
            <jhi-secured-image *ngIf="courseDTO.course.courseIcon" [cachingStrategy]="CachingStrategy.LOCAL_STORAGE" [src]="courseDTO.course.courseIcon"></jhi-secured-image>
            <h2><span jhiTranslate="artemisApp.course.detail.title">Course</span> {{ courseDTO.course.id }}</h2>
        </div>
        <hr />
        <jhi-alert></jhi-alert>
        <jhi-alert-error></jhi-alert-error>
        <dl class="row-md jh-entity-details">
            <dt><span jhiTranslate="artemisApp.course.title">Title</span></dt>
            <dd>
                <span>{{ courseDTO.course.title }}</span>
            </dd>
            <dt><span jhiTranslate="artemisApp.course.shortName">Short Name</span></dt>
            <dd>
                <span>{{ courseDTO.course.shortName }}</span>
            </dd>
            <div *ngIf="courseDTO.isAtLeastInstructor">
                <dt><span jhiTranslate="artemisApp.course.studentGroupName">Student Group Name</span></dt>
                <dd>
                    <a [routerLink]="['/course-management', courseDTO.course.id, 'groups', 'students']">
                        {{ courseDTO.course.studentGroupName }} ({{ courseDTO.numberOfStudentsInCourse }})</a
                    >
                </dd>
                <dt><span jhiTranslate="artemisApp.course.teachingAssistantGroupName">Teaching Assistant Group Name</span></dt>
                <dd>
                    <a [routerLink]="['/course-management', courseDTO.course.id, 'groups', 'tutors']">
                        {{ courseDTO.course.teachingAssistantGroupName }} ({{ courseDTO.numberOfTeachingAssistantsInCourse }})</a
                    >
                </dd>
                <dt><span jhiTranslate="artemisApp.course.instructorGroupName">Instructor Group Name</span></dt>
                <dd>
                    <a [routerLink]="['/course-management', courseDTO.course.id, 'groups', 'instructors']">
                        {{ courseDTO.course.instructorGroupName }} ({{ courseDTO.numberOfInstructorsInCourse }})</a
                    >
                </dd>
            </div>
            <div *ngIf="!courseDTO.isAtLeastInstructor">
                <dt><span jhiTranslate="artemisApp.course.studentGroupName">Student Group Name</span></dt>
                <dd>
                    <span>{{ courseDTO.course.studentGroupName }}</span>
                </dd>
                <dt><span jhiTranslate="artemisApp.course.teachingAssistantGroupName">Teaching Assistant Group Name</span></dt>
                <dd>
                    <span>{{ courseDTO.course.teachingAssistantGroupName }}</span>
                </dd>
                <dt><span jhiTranslate="artemisApp.course.instructorGroupName">Instructor Group Name</span></dt>
                <dd>
                    <span>{{ courseDTO.course.instructorGroupName }}</span>
                </dd>
            </div>
            <dt><span jhiTranslate="artemisApp.course.startDate">Start Date</span></dt>
            <dd>
                <span>{{ courseDTO.course.startDate | artemisDate }}</span>
            </dd>
            <dt><span jhiTranslate="artemisApp.course.endDate">End Date</span></dt>
            <dd>
                <span>{{ courseDTO.course.endDate | artemisDate }}</span>
            </dd>
            <dt><span jhiTranslate="artemisApp.course.semester">Semester</span></dt>
            <dd>
                <span *ngIf="courseDTO.course.semester && courseDTO.course.semester !== ''">{{ courseDTO.course.semester }}</span>
                <span *ngIf="!courseDTO.course.semester || courseDTO.course.semester === ''">{{ 'global.generic.unset' | artemisTranslate }}</span>
            </dd>
            <dt><span jhiTranslate="artemisApp.course.testCourse.title">Test Course</span></dt>
            <dd>
                <span *ngIf="courseDTO.course.testCourse">{{ 'global.generic.yes' | artemisTranslate }}</span>
                <span *ngIf="!courseDTO.course.testCourse">{{ 'global.generic.no' | artemisTranslate }}</span>
            </dd>
            <dt><span jhiTranslate="artemisApp.course.onlineCourse.title">Online Course</span></dt>
            <dd>
                <span *ngIf="courseDTO.course.onlineCourse">{{ 'global.generic.yes' | artemisTranslate }}</span>
                <span *ngIf="!courseDTO.course.onlineCourse">{{ 'global.generic.no' | artemisTranslate }}</span>
            </dd>
            <dt><span jhiTranslate="artemisApp.course.presentationScoreEnabled.title">Presentation Score Enabled</span></dt>
            <dd>
                <span *ngIf="courseDTO.course.presentationScore !== 0">{{ 'global.generic.yes' | artemisTranslate }}</span>
                <span *ngIf="courseDTO.course.presentationScore === 0">{{ 'global.generic.no' | artemisTranslate }}</span>
            </dd>
            <ng-container *ngIf="courseDTO.course.presentationScore !== 0">
                <dt><span jhiTranslate="artemisApp.course.presentationScore">Presentation Score</span></dt>
                <dd>
                    <span>{{ courseDTO.course.presentationScore }}</span>
                </dd>
            </ng-container>
            <ng-container *ngIf="courseDTO.course.maxComplaints !== 0">
                <dt><span jhiTranslate="artemisApp.course.maxComplaints.title">Maximum amount of complaints per student</span></dt>
                <dd>
                    <span>{{ courseDTO.course.maxComplaints }}</span>
                </dd>
            </ng-container>
            <ng-container *ngIf="courseDTO.course.maxTeamComplaints !== 0">
                <dt><span jhiTranslate="artemisApp.course.maxTeamComplaints.title">Maximum amount of complaints per team</span></dt>
                <dd>
                    <span>{{ courseDTO.course.maxTeamComplaints }}</span>
                </dd>
            </ng-container>
            <ng-container *ngIf="courseDTO.course.maxComplaintTimeDays !== 0">
                <dt><span jhiTranslate="artemisApp.course.maxComplaintTimeDays.title">Deadline for complaints in days after result date</span></dt>
                <dd>
                    <span>{{ courseDTO.course.maxComplaintTimeDays }}</span>
                </dd>
            </ng-container>
            <ng-container *ngIf="courseDTO.course.maxRequestMoreFeedbackTimeDays !== 0">
                <dt><span jhiTranslate="artemisApp.course.maxRequestMoreFeedbackTimeDays.title">Deadline for more feedback requests in days after result date</span></dt>
                <dd>
                    <span>{{ courseDTO.course.maxRequestMoreFeedbackTimeDays }}</span>
                </dd>
            </ng-container>
        </dl>
    </div>
</div>
