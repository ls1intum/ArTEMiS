<div>
    <div class="d-flex">
        <div class="mb-3">
            <h2>
                <span>{{ exercise?.title }} - </span>{{ filteredTeamsSize }} <span jhiTranslate="artemisApp.team.home.title">Teams</span>
            </h2>
        </div>
        <div class="d-flex ml-auto">
            <jhi-team-update-button [exercise]="exercise" [buttonSize]="ButtonSize.MEDIUM" (save)="onTeamUpdate($event)"></jhi-team-update-button>
        </div>
    </div>
    <jhi-alert></jhi-alert>
    <jhi-data-table
        [isLoading]="isLoading"
        entityType="team"
        [allEntities]="teams"
        entitiesPerPageTranslation="artemisApp.exercise.resultsPerPage"
        showAllEntitiesTranslation="artemisApp.exercise.showAllResults"
        searchPlaceholderTranslation="artemisApp.exercise.searchForTeams"
        [searchFields]="['name']"
        [searchTextFromEntity]="searchTextFromTeam"
        [searchResultFormatter]="searchResultFormatter"
        (entitiesSizeChange)="handleTeamsSizeChange($event)"
    >
        <ng-template let-settings="settings" let-controls="controls">
            <ngx-datatable
                class="bootstrap"
                [limit]="settings.limit"
                [sortType]="settings.sortType"
                [columnMode]="settings.columnMode"
                [headerHeight]="settings.headerHeight"
                [footerHeight]="settings.footerHeight"
                [rowHeight]="settings.rowHeight"
                [rows]="settings.rows"
                [rowClass]="settings.rowClass"
                [scrollbarH]="settings.scrollbarH"
            >
                <ngx-datatable-column prop="id" [minWidth]="60" [width]="80" [maxWidth]="100">
                    <ng-template ngx-datatable-header-template>
                        <span class="datatable-header-cell-wrapper" (click)="controls.onSort('id')">
                            <span class="datatable-header-cell-label bold sortable" jhiTranslate="global.field.id">
                                ID
                            </span>
                            <fa-icon [icon]="controls.iconForSortPropField('id')"></fa-icon>
                        </span>
                    </ng-template>
                    <ng-template ngx-datatable-cell-template let-value="value">
                        <a routerLink="/team/{{ value }}">{{ value }}</a>
                    </ng-template>
                </ngx-datatable-column>

                <ngx-datatable-column prop="name" [minWidth]="100" [width]="150" [maxWidth]="150">
                    <ng-template ngx-datatable-header-template>
                        <span class="datatable-header-cell-wrapper" (click)="controls.onSort('name')">
                            <span class="datatable-header-cell-label bold sortable" jhiTranslate="artemisApp.team.name.label">
                                Name
                            </span>
                            <fa-icon [icon]="controls.iconForSortPropField('name')"></fa-icon>
                        </span>
                    </ng-template>
                    <ng-template ngx-datatable-cell-template let-value="value">
                        <span>{{ value }}</span>
                    </ng-template>
                </ngx-datatable-column>

                <ngx-datatable-column prop="" [minWidth]="500" [width]="600">
                    <ng-template ngx-datatable-header-template>
                        <span class="datatable-header-cell-wrapper">
                            <span class="datatable-header-cell-label bold" jhiTranslate="artemisApp.team.students">
                                Students
                            </span>
                        </span>
                    </ng-template>
                    <ng-template ngx-datatable-cell-template let-value="value">
                        <ul class="list-group list-group-horizontal">
                            <li class="list-group-item student-group-item" *ngFor="let student of value.students">{{ student.firstName }} {{ student.lastName }}</li>
                        </ul>
                    </ng-template>
                </ngx-datatable-column>

                <ngx-datatable-column prop="" [minWidth]="350" [width]="350" [maxWidth]="500">
                    <ng-template ngx-datatable-cell-template let-value="value">
                        <div class="w-100 text-right">
                            <jhi-team-update-button class="mr-1" [exercise]="exercise" [team]="value" (save)="onTeamUpdate($event)"></jhi-team-update-button>
                            <button (click)="removeTeam(value)" class="btn btn-danger btn-sm">
                                <fa-icon [icon]="'trash-alt'"></fa-icon>
                                <span class="d-none d-md-inline ml-1" jhiTranslate="artemisApp.team.removeTeam.label">Remove team</span>
                            </button>
                        </div>
                    </ng-template>
                </ngx-datatable-column>
            </ngx-datatable>
        </ng-template>
    </jhi-data-table>
</div>
