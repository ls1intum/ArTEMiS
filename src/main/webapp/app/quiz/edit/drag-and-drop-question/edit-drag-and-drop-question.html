<div class="edit-dnd-question" ng-hide="vm.showPreview">
    <div class="question-options">
        <div class="form-group question-title">
            <input class="form-control" ng-model="vm.question.title" placeholder="Question Title"/>
        </div>
        <div class="form-group">
            <div class="delete-button" ng-click="vm.delete()">
                <i class="fa fa-trash fa-2x"></i>
            </div>
        </div>
    </div>
    <div class="question-options">
        <div class="form-group">
            <span data-translate="artemisApp.question.scoringType" class="colon-suffix no-flex-shrink"></span>
            <select class="form-control" ng-options="option.key as option.label for option in vm.scoringTypeOptions" ng-model="vm.question.scoringType" title="scoring type"></select>
        </div>
        <div class="form-group">
            <div class="checkbox">
                <label>
                    <input type="checkbox" ng-model="vm.question.randomizeOrder"/>
                    <span data-translate="artemisApp.question.randomizeOrder"></span>
                </label>
            </div>
        </div>
        <div class="form-group">
            <span data-translate="artemisApp.question.score" class="colon-suffix"></span>
            <input class="form-control" title="score" type="number" min="0" max="9999" ng-model="vm.question.score"/>
        </div>
    </div>
    <div class="question-options">
        <div class="form-group">
            <span data-translate="artemisApp.dragAndDropQuestion.uploadBackgroundPicture" class="colon-suffix no-flex-shrink"></span>
            <input type="file" accept="image/*" file-model="vm.backgroundFile"/>
            <button ng-disabled="vm.isUploadingBackgroundFile || !vm.backgroundFile" class="btn btn-default" ng-click="vm.uploadBackground()">
                {{vm.isUploadingBackgroundFile ? "Uploading..." : "Upload"}}
            </button>
        </div>
    </div>
    <div class="instructions" ng-if="vm.question.backgroundFilePath">
        <span data-translate="artemisApp.dragAndDropQuestion.drawOnBackgroundInstructions"></span>
    </div>
    <div class="background-area">
        <img ng-src="{{vm.question.backgroundFilePath}}" alt="Please upload a background picture.">
        <div class="click-layer" ng-mousedown="vm.backgroundMouseDown()">
            <div
                class="drop-location"
                ng-repeat="dropLocation in vm.question.dropLocations"
                ng-style="{top: dropLocation.posY/2 + '%', left: dropLocation.posX/2 + '%', width: dropLocation.width/2 + '%', height: dropLocation.height/2 + '%'}"
                ng-mousedown="vm.dropLocationMouseDown(dropLocation)"
                ui-on-drop="vm.onDragDrop(dropLocation, $data)"
                drag-enter-class="drop-allowed"
                drag-hover-class="drop-hover"
            >
                <div class="dimensions">
                    {{dropLocation.width}}x{{dropLocation.height}}
                </div>
                <div class="duplicate-button" title="Duplicate" ng-click="vm.duplicateDropLocation(dropLocation)">
                    <i class="fa fa-copy fa-lg"></i>
                </div>
                <div class="delete-button" title="Delete" ng-click="vm.deleteDropLocation(dropLocation)">
                    <i class="fa fa-trash fa-lg"></i>
                </div>
                <div class="resize top left" ng-mousedown="vm.resizeMouseDown(dropLocation, 'top', 'left')"></div>
                <div class="resize top center" ng-mousedown="vm.resizeMouseDown(dropLocation, 'top', 'center')"></div>
                <div class="resize top right" ng-mousedown="vm.resizeMouseDown(dropLocation, 'top', 'right')"></div>
                <div class="resize middle left" ng-mousedown="vm.resizeMouseDown(dropLocation, 'middle', 'left')"></div>
                <div class="resize middle right" ng-mousedown="vm.resizeMouseDown(dropLocation, 'middle', 'right')"></div>
                <div class="resize bottom left" ng-mousedown="vm.resizeMouseDown(dropLocation, 'bottom', 'left')"></div>
                <div class="resize bottom center" ng-mousedown="vm.resizeMouseDown(dropLocation, 'bottom', 'center')"></div>
                <div class="resize bottom right" ng-mousedown="vm.resizeMouseDown(dropLocation, 'bottom', 'right')"></div>
            </div>
        </div>
    </div>
    <hr/>
    <div>
        <span class="colon-suffix" data-translate="artemisApp.dragAndDropQuestion.dragItems"></span>
    </div>
    <div class="drag-items">
        <div class="drag-item" ng-repeat="dragItem in vm.question.dragItems" ui-draggable="true" drag="dragItem" drag-handle-class="drag-handle">
            <div ng-if="dragItem.pictureFilePath">
                <img ng-src="{{dragItem.pictureFilePath}}">
            </div>
            <div ng-if="!dragItem.pictureFilePath">
                <textarea ng-model="dragItem.text" ng-change="vm.onUpdated()"></textarea>
            </div>
            <div class="delete-button" title="Delete" ng-click="vm.deleteDragItem(dragItem)">
                <i class="fa fa-trash fa-lg"></i>
            </div>
            <div class="drag-handle drag-handle-wrapper">
                <i class="fa fa-bars fa-lg drag-handle"></i>
            </div>
        </div>
        <div ng-if="!vm.question.dragItems || !vm.question.dragItems.length" class="instructions">
            Add Drag Items using the buttons below.
        </div>
    </div>
    <div class="question-options">
        <div class="form-group">
            <button ng-disabled="vm.isUploadingDragItemFile || !vm.dragItemFile" class="btn btn-default" ng-click="vm.uploadDragItem()">
                <i class="fa fa-plus"></i>
                {{vm.isUploadingDragItemFile ? "Uploading..." : "Add Picture Drag Item"}}
            </button>
            <input type="file" accept="image/*" file-model="vm.dragItemFile"/>
        </div>
    </div>
    <div class="question-options">
        <div class="form-group">
            <button class="btn btn-default" ng-click="vm.addTextDragItem()">
                <i class="fa fa-plus"></i>
                Add Text Drag Item
            </button>
        </div>
    </div>
</div>
<div class="preview-dnd-question" ng-if="vm.showPreview">
    TODO
</div>
