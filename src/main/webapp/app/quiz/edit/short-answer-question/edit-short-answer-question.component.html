<div class="edit-sa-question" [hidden]="showPreview">
    <div class="question-options card-header question-card-header">
        <button
            class="btn btn-light question-collapse"
            (click)= "isQuestionCollapsed = !isQuestionCollapsed"
            [attr.aria-expanded]="!isQuestionCollapsed"
            [attr.aria-controls]="'collapseQuestion' + questionIndex">
            <span class="fa fa-3x" [ngClass]="isQuestionCollapsed ? 'fa-angle-right' : 'fa-angle-down'"></span>
        </button>
        <div class="form-group question-title col-lg-9 col-md-7 col-sm-12 col-xs-12">
            <input class="form-control" [(ngModel)]="question.title" placeholder="Question Title"/>
        </div>
        <div class="form-group col-lg-2 col-md-3 col-sm-7 col-xs-8">
            <span jhiTranslate="arTeMiSApp.question.score" class="colon-suffix"></span>
            <input class="form-control" title="score" type="number" min="0" max="9999" [(ngModel)]="question.score"/>
        </div>
        <div class="col-lg-1 col-md-2 col-sm-4 col-xs-4"><h3><span class="badge badge-warning align-text-top">SA</span></h3></div>
    </div>

    <div class="card-body question-card-body" [ngbCollapse]="isQuestionCollapsed" id="collapseQuestion{{questionIndex}}">

        <!-- reevalute? siehe dnd -->

        <div class="question-options">
            <div class="form-group">
                <span jhiTranslate="arTeMiSApp.question.scoringType" class="colon-suffix no-flex-shrink"></span>
                <select class="form-control" [(ngModel)]="question.scoringType" title="scoring type">
                    <option value="ALL_OR_NOTHING">{{'arTeMiSApp.quizExercise.scoringType.all_or_nothing' | translate}}</option>
                    <option value="PROPORTIONAL_WITH_PENALTY">{{'arTeMiSApp.quizExercise.scoringType.proportional_with_penalty' | translate}}</option>
                </select>
            </div>
            <div class="form-group">
                <div class="form-check custom-control custom-checkbox"></div>
            </div>
            <div class="form-group">
                <div class="delete-button" (click)="deleteQuestion()">
                    <i class="fa fa-trash fa-2x"></i>
                </div>
            </div>

            <!-- reevalute? siehe dnd -->
        </div>

        <div class="markupEditorArea">
            <div class="toolbar">
                <div class="btn-group">
                    <div class="btn btn-outline-secondary" jhiTranslate="arTeMiSApp.shortAnswerQuestion.editor.addHint" (click)="addHintAtCursor()"></div>
                    <div class="btn btn-outline-secondary" jhiTranslate="arTeMiSApp.shortAnswerQuestion.editor.addExplanation" (click)="addExplanationAtCursor()"></div>
                    <div class="btn btn-outline-secondary" jhiTranslate="arTeMiSApp.shortAnswerQuestion.editor.addSpot" (click)="addSpotAtCursor()"></div>
                    <div class="btn btn-outline-secondary" jhiTranslate="arTeMiSApp.shortAnswerQuestion.editor.addOption" (click)="addOption()"></div>
                </div>
            </div>
            <div class="question-content">
                <ace-editor #questionEditor
                            [(text)]="questionEditorText"
                            [mode]="questionEditorMode"
                            [autoUpdateContent]="questionEditorAutoUpdate"
                            style="min-height: 200px; width:100%; overflow: auto;"
                            class="form-control">
                </ace-editor>
            </div>
            <div class="toolbar">
                <div class="btn-group">
                    <div class="btn btn-outline-secondary" jhiTranslate="arTeMiSApp.shortAnswerQuestion.editor.visual" (click)="togglePreview()"></div>
                    <div class="btn btn-outline-secondary" jhiTranslate="arTeMiSApp.shortAnswerQuestion.editor.text" (click)="togglePreview()"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="preview-sa-question" *ngIf="!reEvaluationInProgress && showPreview">
    <!--Todo: FDE check why question is not forwarded to preview -->
    <jhi-short-answer-question [question]="question"
                               [questionIndex]="questionIndex">
    </jhi-short-answer-question>
    <hr/>
    <div class="btn btn-outline-secondary" (click)="togglePreview()">
        <i class="fa fa-pencil"></i>
        <span jhiTranslate="entity.action.edit"></span>
    </div>
</div>
