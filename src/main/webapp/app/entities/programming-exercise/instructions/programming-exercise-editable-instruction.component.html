<div class="editable-instruction-container">
    <button
        *ngIf="enableSave"
        id="save-instructions-button"
        [disabled]="savingInstructions || !unsavedChanges"
        (click)="saveInstructions($event)"
        class="btn btn-light editable-instruction-container__save"
    >
        <fa-icon *ngIf="!savingInstructions" icon="save" class="mr-2"></fa-icon>
        <fa-icon *ngIf="savingInstructions" icon="circle-notch" [spin]="true" class="mr-2"></fa-icon>
        <span jhiTranslate="entity.action.save"></span>
    </button>
    <jhi-markdown-editor
        [defaultHeight]="markdownEditorHeight"
        [domainCommands]="domainCommands"
        [enableResize]="enableResize"
        [markdown]="exercise.problemStatement"
        (markdownChange)="updateProblemStatement($event)"
    >
        <jhi-programming-exercise-instructions #preview [participation]="participation" [exercise]="exercise"> </jhi-programming-exercise-instructions>
    </jhi-markdown-editor>
    <div *ngIf="showStatus" class="card-footer text-nowrap editable-instruction-container__status">
        <span class="instructions-status">
            <span *ngIf="!unsavedChanges">
                <fa-icon icon="check-circle" class="text-success mr-1" ngbTooltip="{{ 'artemisApp.programmingExercise.editable.savedTooltip' | translate }}"></fa-icon>
                <span class="text-info" jhiTranslate="artemisApp.programmingExercise.editable.saved">Saved.</span>
            </span>
            <span *ngIf="unsavedChanges">
                <fa-icon icon="exclamation-triangle" class="text-warning mr-1" ngbTooltip="{{ 'artemisApp.programmingExercise.editable.unsavedTooltip' | translate }}"></fa-icon>
                <span class="text-info" jhiTranslate="artemisApp.programmingExercise.editable.unsaved">Unsaved.</span>
            </span>
            <span *ngIf="unsavedChanges && savingInstructions">
                <fa-icon icon="circle-notch" class="mr-1" ngbTooltip="{{ 'artemisApp.programmingExercise.editable.savingTooltip' | translate }}"></fa-icon>
                <span class="text-info" jhiTranslate="artemisApp.programmingExercise.editable.saving">Saving...</span>
            </span>
        </span>
        <jhi-programming-exercise-instruction-testcase-status
            [exerciseTestCases]="exerciseTestCases"
            [problemStatement]="exercise.problemStatement"
            [taskRegex]="taskRegex"
            class="editable-instruction-container__status__testcase"
        ></jhi-programming-exercise-instruction-testcase-status>
    </div>
</div>
