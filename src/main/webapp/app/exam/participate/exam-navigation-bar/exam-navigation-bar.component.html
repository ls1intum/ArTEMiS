<div class="row justify-content-between align-items-start exam-navigation sticky-top pt-2">
    <div class="col-auto d-none d-md-block h3 m-0 text-overflow" *ngIf="exercises && exercises.length > 0">
        {{ 'artemisApp.examParticipation.progress' | translate: { current: exerciseIndex + 1, all: exercises.length } }}
    </div>
    <div class="col-auto d-block d-md-none h3 m-0 text-overflow" *ngIf="exercises && exercises.length > 0">
        {{ 'artemisApp.examParticipation.progressSmall' | translate: { current: exerciseIndex + 1, all: exercises.length } }}
    </div>
    <div class="col">
        <div class="d-flex justify-content-center">
            <div class="navigation-item">
                <button class="btn btn-secondary w-100" (click)="changeExercise(exerciseIndex - 1)">
                    <span aria-hidden="true">&laquo;</span>
                    <span class="sr-only">Previous</span>
                </button>
            </div>
            <ng-container *ngFor="let exercise of exercises; let i = index">
                <div
                    class="navigation-item"
                    *ngIf="
                        i >=
                            exerciseIndex -
                                itemsVisiblePerSide -
                                (exerciseIndex + 1 + itemsVisiblePerSide > exercises.length ? exerciseIndex + 1 + itemsVisiblePerSide - exercises.length : 0) &&
                        i <= exerciseIndex + itemsVisiblePerSide - (exerciseIndex - itemsVisiblePerSide <= 0 ? exerciseIndex - itemsVisiblePerSide : 0)
                    "
                >
                    <button class="btn w-100" [ngClass]="setExerciseButtonStatus(i)" (click)="changeExercise(i)">
                        <fa-icon [icon]="icon"></fa-icon>
                    </button>
                    <div class="exerciseIndex">{{ i + 1 }}</div>
                </div>
            </ng-container>
            <div class="navigation-item">
                <button class="btn btn-secondary w-100" (click)="changeExercise(exerciseIndex + 1)">
                    <span aria-hidden="true">&raquo;</span>
                    <span class="sr-only">Next</span>
                </button>
            </div>
        </div>
    </div>
    <div class="col-auto">
        <div class="row justify-content-end align-items-start pr-2">
            <div class="col-auto">
                <button *ngIf="isProgrammingExercise(); else notAProgrammingExercise" class="btn btn-primary px-3 mb-2" (click)="saveExercise()">
                    {{ 'artemisApp.examParticipation.' + (exerciseIndex >= exercises.length - 1 ? 'submitLastExercise' : 'submitOtherExercise') | translate }}
                    <!-- TODO: do not show a "Save" button for offline only programming exercises, show continue -->
                </button>
                <ng-template #notAProgrammingExercise>
                    <button class="btn btn-primary px-3 mb-2" (click)="saveExercise()">
                        {{ 'artemisApp.examParticipation.' + (exerciseIndex >= exercises.length - 1 ? 'submitLastExercise' : 'submitOtherExercise') | translate }}
                    </button>
                </ng-template>
            </div>
            <div class="col-auto h3 timer px-1" jhiTranslate="artemisApp.examParticipation.timer">Time Left:</div>
            <div class="col-auto h3 m-0 text-overflow remaining-time mb-2 px-1" [class.critical]="criticalTime">
                {{ displayTime$ | async }}
            </div>
        </div>
    </div>
</div>
