<div class="row align-items-center">
    <div class="col-1" [ngSwitch]="exercise.type">
        <fa-icon [icon]="'keyboard'" *ngSwitchCase="'programming'" placement="right"
                 ngbTooltip="This is a programming quiz"></fa-icon>
        <fa-icon [icon]="'project-diagram'" *ngSwitchCase="'modeling'" placement="right"
                 ngbTooltip="This is a modeling quiz"></fa-icon>
        <fa-icon [icon]="'check-double'" *ngSwitchCase="'quiz'" placement="right"
                 ngbTooltip="This is a multiple choice quiz"></fa-icon>
        <fa-icon [icon]="'font'" *ngSwitchCase="'text'" placement="right"
                 ngbTooltip="This is a text quiz"></fa-icon>
        <fa-icon [icon]="'file-upload'" *ngSwitchCase="'file-upload'" placement="right"
                 ngbTooltip="This is a file upload"></fa-icon>
    </div>
    <div class="col-3">
        <span>{{exercise.title}}</span>
        <a class="text-primary" *ngIf="exercise.isAtLeastTutor">
            <i class="fa fa-info-circle fa-fw" routerLink="/course/{{course.id}}/exercise/{{exercise.id}}/dashboard" routerLinkActive="active"></i></a>
        <a class="text-primary" *ngIf="exercise.isAtLeastTutor">
            <i *ngIf="exercise.type === MODELING" class="fa fa-graduation-cap fa-fw" routerLink="/course/{{course.id}}/exercise/{{exercise.id}}/assessment" routerLinkActive="active"></i></a>
        <a class="text-primary" *ngIf="exercise.isAtLeastTutor">
            <i *ngIf="exercise.type === TEXT" class="fa fa-graduation-cap fa-fw" routerLink="/text/{{exercise.id}}/assessment" routerLinkActive="active"></i></a>
        <a class="text-primary" *ngIf="exercise.isAtLeastTutor"><i *ngIf="exercise.type === MODELING"
                                                                   class="fa fa-pie-chart fa-fw" routerLink="/course/{{course.id}}/exercise/{{exercise.id}}/statistics" routerLinkActive="active"></i></a>

        <span class="badge badge-warning" *ngIf="!exercise.visibleToStudents" placement="right"
              ngbTooltip="Only visible to teaching assistants and instructors. Release date: {{exercise.releaseDate | date:'MMM d, y H:mm'}}">
                    Not Released</span>
        <span class="badge badge-success" [hidden]="!exercise.isActiveQuiz">Live</span>
    </div>
    <div class="col-2">{{exercise.dueDate | date:'dd/MM/yy'}}</div>
    <div class="col-3" [ngSwitch]="exercise.participationStatus">
        <span class="text-muted" *ngSwitchCase="'uninitialized'">You have not started this exercise yet.</span>
        <span *ngSwitchCase="'initialized'">
            <jhi-result [participation]="exercise.participations[0]"></jhi-result>
        </span>
        <span *ngSwitchCase="'inactive'">
            <jhi-result [participation]="exercise.participations[0]"></jhi-result>
        </span>
        <span class="text-muted" *ngSwitchCase="'quiz-not-started'">The quiz hasn't started yet.</span>
        <span class="text-muted" *ngSwitchCase="'quiz-uninitialized'">You have not started this quiz yet.</span>
        <span class="text-muted"
              *ngSwitchCase="'quiz-not-participated'">You have not participated in this live quiz.</span>
        <span class="text-muted" *ngSwitchCase="'quiz-active'">You are currently participating in this quiz.</span>
        <span class="text-muted" *ngSwitchCase="'quiz-submitted'">You have already submitted. Wait for the quiz to end to see results.</span>
        <span *ngSwitchCase="'quiz-finished'">
            <jhi-result [participation]="exercise.participations[0]"></jhi-result>
        </span>
        <span *ngSwitchCase="'modeling-exercise'">
            <jhi-result [participation]="exercise.participations[0]"></jhi-result>
        </span>
        <span *ngSwitchCase="'text-exercise'">
            <jhi-result [participation]="exercise.participations[0]"></jhi-result>
        </span>
    </div>
    <div class="col-3" [ngSwitch]="exercise.participationStatus">
        <button class="btn btn-primary btn-sm btn-block" id="btn-student-action"
                *ngSwitchCase="'uninitialized'"
                (click)="startExercise(exercise)"
                [disabled]="exercise.loading">
            <span [hidden]="exercise.loading"><i class="fa fa-play-circle fa-fw"></i>&nbsp;<span
                class="d-none d-md-inline">Start exercise</span></span>
            <i class="fa fa-circle-o-notch fa-spin" [hidden]="!exercise.loading"></i>
        </button>
        <button class="btn btn-primary btn-sm btn-block"
                *ngSwitchCase="'inactive'"
                (click)="resumeExercise(exercise)"
                [disabled]="exercise.loading">
            <span [hidden]="exercise.loading"><i class="fa fa-play-circle fa-fw"></i>&nbsp;<span
                class="d-none d-md-inline">Resume exercise</span></span>
            <i [hidden]="!exercise.loading" class="fa fa-circle-o-notch fa-spin"></i>
        </button>
        <div *ngSwitchCase="'initialized'">
            <div *ngIf="exercise.type === PROGRAMMING && exercise.participations && exercise.participations.length > 0">
                <a routerLink="/editor/{{exercise.participations[0].id}}" routerLinkActive="active"
                   class="btn btn-primary btn-sm btn-block" id="btn-online-editor" *ngIf="exercise.allowOnlineEditor">
                    <i class="fa fa-folder-open fa-fw"></i>&nbsp;<span
                    class="d-none d-md-inline">Open exercise</span></a>
                <ng-template #popContent>
                    <p>Clone your personal repository for this exercise:</p>
                    <pre style="max-width: 100%;">{{exercise.participations[0].repositoryUrl}}</pre>
                    <p *ngIf="repositoryPassword">Your password is: <code class="password">{{repositoryPassword}}</code>
                        (hover to show)</p>
                    <button class="btn btn-primary btn-sm mr-2" type="button" ngxClipboard
                            [cbContent]="exercise.participations[0].repositoryUrl" (cbOnSuccess)="onCopySuccess()"
                            (cbOnError)="onCopyFailure()" [class.btn-success]="wasCopied">Copy URL
                    </button>
                    <a class="btn btn-primary btn-sm mr-2"
                       [href]="buildSourceTreeUrl(exercise.participations[0].repositoryUrl) | safeUrl">Clone in
                        SourceTree</a>
                    <a href="http://www.sourcetreeapp.com" target="_blank">Atlassian SourceTree</a> is the free Git
                    client for Windows or Mac.
                </ng-template>
                <button placement="left"
                        [ngbPopover]="popContent"
                        [autoClose]="'outside'"
                        type="button" class="btn btn-primary btn-sm btn-block"><i
                    class="fa fa-download fa-fw"></i>&nbsp;<span class="d-none d-md-inline">Clone repository</span>
                </button>
                <button class="btn btn-primary btn-sm btn-block" id="btn-build-plan"
                        *ngIf="exercise.publishBuildPlanUrl" (click)="goToBuildPlan(exercise.participations[0])"><i
                    class="fa fa-external-link fa-fw"></i>
                    &nbsp;<span class="d-none d-md-inline">Go to build plan</span></button>
            </div>
        </div>
        <div *ngSwitchCase="'modeling-exercise'">
            <div *ngIf="exercise.participations && exercise.participations.length > 0"
                 class="btn-group flex-btn-group-container">
                <a routerLink="/modeling-editor/{{exercise.participations[0].id}}" routerLinkActive="active"
                   class="btn btn-primary btn-sm btn-block">
                    <i class="fa fa-folder-open fa-fw"></i>&nbsp;<span class="d-none d-md-inline"
                                                                       *ngIf="exercise.participations[0].initializationState === 'INITIALIZED'">Open modeling editor</span>
                    <span class="d-none d-md-inline"
                          *ngIf="exercise.participations[0].initializationState === 'FINISHED'">Show submission</span>
                </a>
            </div>
        </div>
        <div *ngSwitchCase="'text-exercise'">
            <div *ngIf="exercise.participations && exercise.participations.length > 0"
                 class="btn-group flex-btn-group-container">
                <a routerLink="/text/{{exercise.participations[0].id}}" routerLinkActive="active"
                   class="btn btn-primary btn-sm btn-block">
                    <i class="fa fa-folder-open fa-fw"></i>&nbsp;<span class="d-none d-md-inline"
                                                                       *ngIf="exercise.participations[0].initializationState === 'INITIALIZED'">Open text editor</span>
                    <span class="d-none d-md-inline"
                          *ngIf="exercise.participations[0].initializationState === 'FINISHED'">Show submission</span>
                </a>
            </div>
        </div>
        <div class="btn-group flex-btn-group-container" *ngIf="exercise.type === QUIZ">
            <button class="btn btn-warning btn-sm"
                    *ngIf="exercise.isPracticeModeAvailable"
                    [routerLink]="['/quiz', exercise.id, 'practice']"
                    (click)="startPractice(exercise)"
                    [disabled]="exercise.loading">
                <span [hidden]="exercise.loading"><i class="fa fa-repeat fa-fw"></i>&nbsp;<span
                    class="d-none d-md-inline">Practice</span></span>
                <i class="fa fa-circle-o-notch fa-spin" [hidden]="!exercise.loading"></i>
            </button>
            <button class="btn btn-primary btn-sm btn-block"
                    *ngSwitchCase="'quiz-not-started'"
                    (click)="startExercise(exercise)"
                    [disabled]="exercise.loading">
                <span [hidden]="exercise.loading"><i class="fa fa-play-circle fa-fw"></i>&nbsp;<span
                    class="d-none d-md-inline">Open Quiz</span></span>
                <i class="fa fa-circle-o-notch fa-spin" [hidden]="!exercise.loading"></i>
            </button>
            <button class="btn btn-primary btn-sm btn-block"
                    *ngSwitchCase="'quiz-uninitialized'"
                    (click)="startExercise(exercise)"
                    [disabled]="exercise.loading">
                <span [hidden]="exercise.loading"><i class="fa fa-play-circle fa-fw"></i>&nbsp;<span
                    class="d-none d-md-inline">Start Quiz</span></span>
                <i class="fa fa-circle-o-notch fa-spin" [hidden]="!exercise.loading"></i>
            </button>
            <button class="btn btn-primary btn-sm btn-block"
                    *ngSwitchCase="'quiz-active'"
                    (click)="startExercise(exercise)"
                    [disabled]="exercise.loading">
                <span [hidden]="exercise.loading"><i class="fa fa-play-circle fa-fw"></i>&nbsp;<span
                    class="d-none d-md-inline">Resume Quiz</span></span>
                <i class="fa fa-circle-o-notch fa-spin" [hidden]="!exercise.loading"></i>
            </button>
            <button class="btn btn-primary btn-sm btn-block"
                    *ngSwitchCase="'quiz-submitted'"
                    (click)="startExercise(exercise)"
                    [disabled]="exercise.loading">
                <span [hidden]="exercise.loading"><i class="fa fa-eye fa-fw"></i>&nbsp;<span class="d-none d-md-inline">View Submission</span></span>
                <i class="fa fa-circle-o-notch fa-spin" [hidden]="!exercise.loading"></i>
            </button>
            <button class="btn btn-primary btn-sm btn-block"
                    *ngSwitchCase="'quiz-finished'"
                    (click)="startExercise(exercise)"
                    [disabled]="exercise.loading">
                <span [hidden]="exercise.loading"><i class="fa fa-eye fa-fw"></i>&nbsp;<span class="d-none d-md-inline">View Results</span></span>
                <i class="fa fa-circle-o-notch fa-spin" [hidden]="!exercise.loading"></i>
            </button>
            <button type="submit"
                    class="btn btn-success btn-sm"
                    *ngIf="exercise.isAtLeastTutor"
                    routerLink="/quiz/{{exercise.id}}/quiz-point-statistic" routerLinkActive="active">
                <span class="fa fa-signal"></span>
                <span class="d-none d-md-inline" jhiTranslate="global.menu.entities.statistic">Statistic</span>
            </button>
        </div>
    </div>
</div>
